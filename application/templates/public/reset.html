<!doctype html>
<html lang="en">
    {% include 'layout/head.html' %}
    {% include 'layout/google_analytics.html' %}
    <body>
    {% include 'layout/landing_topbar.html' %}

    {% include 'layout/flash_message.html' %}

    <div class="main-container">
        <section class="space-sm">
          <div class="container align-self-start">
            <div class="row mb-5">
              <div class="col text-center">
                <a href="#">
                  <img alt="Image" src="{{ url_for('static', filename='assets/img/logo-gray.svg') }}" />
                </a>
              </div>
              <!--end of col-->
            </div>
            <!--end of row-->
            <div class="row justify-content-center">
              <div class="col-12 col-md-8 col-lg-7">
                <div class="card card-lg text-center">
                  <div class="card-body">
                    <div class="mb-4">
                      <h2 class="mb-2">Reset password</h2>
                      <span>Enter a new password</span>
                    </div>
                    <div class="row no-gutters justify-content-center">
                      <form class="password-strength text-left col-lg-8"  action="{{url_for('public.reset')}}" method="post">
                        {{ form.csrf_token }}
                        {{ form.token(value=reset_token) }}
                        <div class="form-group">
                          <label for="new-password">New Password</label>
                          <div class="input-group">
                            {{ form.password(class="form-control form-control-lg password-strength__input", type="password", id="password-input", placeholder="New Password") }}
                            <div class="input-group-append">
                              <button class="password-strength__visibility btn btn-outline-secondary" type="button"><span class="password-strength__visibility-icon" data-visible="hidden"><i class="fas fa-eye-slash"></i></span><span class="password-strength__visibility-icon js-hidden" data-visible="visible"><i class="fas fa-eye"></i></span></button>
                            </div>
                          </div>
                          <small class="password-strength__error text-danger js-hidden">This symbol is not allowed!</small>
                          <small class="form-text text-muted mt-2" id="passwordHelp">Add 9 characters or more, lowercase letters, uppercase letters, numbers and symbols to make the password really strong!</small>
                        </div>
                        <div class="form-row form-group">
                          <div class="col">
                              <div class="password-strength__bar-block progress">
                                  <div class="password-strength__bar progress-bar bg-danger" role="progressbar" aria-valuenow="0" aria-valuemin="0"aria-valuemax="100"></div>
                              </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="confirm-password">Confirm Password</label>
                          {{ form.password2(class="form-control form-control-lg", type="password", id="confirm-password", placeholder="Confirm Password") }}
                        </div>
                        <div class="text-center mb-4">
                          <button type="submit" class="btn btn-success btn-lg password-strength__submit" disabled="disabled">Reset password</button>
                        </div>
                      </form>
                    </div>
                    <!--end of row-->
                  </div>
                </div>
              </div>
              <!--end of col-->
            </div>
            <!--end of row-->
          </div>
          <!--end of container-->
        </section>
        <!--end of section-->
    </div>
    {% include 'layout/scripts.html' %}
    <script>

      {% if fix_url %}
      $(document).ready(function(){
        var DOMAIN = window.location.origin;
        var FIXED_URL = DOMAIN + '/reset?token=' + "{{reset_token}}";
        //window.location.href = FIXED_URL;
        window.history.replaceState("","",FIXED_URL);
      });
      {% endif %}

    </script>
    <!-- Required script for password strength -->
    <script type="text/javascript" src="{{ url_for('static', filename='assets/js/strength.js') }}"></script>
    </body>
</html>